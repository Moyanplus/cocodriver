# 云盘模块目录结构

```
lib/tool/cloud_drive/
├── base
│   ├── cloud_drive_account_service.dart      # 账号数据的增删改查持久化
│   ├── cloud_drive_service_gateway.dart      # 实例化网关（替代静态 FileService）
│   ├── cloud_drive_operation_service.dart    # 根据 provider 注册的策略分发操作
│   └── ...（公用基础服务类）
├── business
│   ├── cloud_drive_business_service.dart     # 业务聚合入口
│   └── rules/cloud_drive_business_rules.dart # 能力/权限校验，使用能力表
├── config
│   ├── cloud_drive_capabilities.dart         # 能力表（按 provider id 注册）
│   └── cloud_drive_ui_config.dart            # UI 相关配置
├── core
│   └── result.dart                           # 通用结果封装
├── data
│   ├── cache/                                # 缓存实现
│   ├── models/                               # 核心实体、配置、DTO
│   └── repositories/cloud_drive_repository.dart # 云盘仓库接口与请求/响应模型
├── infrastructure
│   ├── error/cloud_drive_error_handler.dart  # 错误处理
│   ├── logging/cloud_drive_logger.dart       # 日志
│   └── network/...                           # 网络层（如 api_client）
├── l10n                                      # 云盘模块本地化
├── models                                    # 额外模型封装（若有）
├── presentation
│   ├── pages/                                # 页面（如登录页）
│   ├── widgets/                              # 组件（账号卡、上传头部等）
│   └── utils/operation_guard.dart            # UI 辅助
├── services
│   ├── registry/                             # provider 描述/注册表（可插拔元数据）、策略注册
│   ├── shared/                               # 校验/下载/文件操作等通用服务
│   ├── providers/                            # 各云盘实现（api/repository/strategy/descriptor）
│   └── base/qr_login_service.dart            # QR 登录基类与管理器
├── utils                                     # 工具类（文件类型判断等）
└── widgets                                   # 公共小部件
```

> 说明：各云盘（如 `services/providers/lanzou`、`services/providers/ali` 等）目录内自包含 api 客户端、repository、strategy、provider descriptor 及模型。新增云盘时仿照目录结构添加并在 `services/registry/default_cloud_drive_providers.dart` 注册。
