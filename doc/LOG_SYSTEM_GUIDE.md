# æ—¥å¿—ç³»ç»Ÿä½¿ç”¨æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬é¡¹ç›®å®ç°äº†ä¸€ä¸ªå®Œæ•´çš„æ—¥å¿—ç®¡ç†ç³»ç»Ÿï¼ŒåŒ…æ‹¬æ—¥å¿—è®°å½•ã€æŸ¥çœ‹ã€å¯¼å‡ºå’Œç®¡ç†åŠŸèƒ½ã€‚

## âœ¨ ä¸»è¦ç‰¹æ€§

### 1. **ä¼˜åŒ–çš„æ—¥å¿—æ ¼å¼**
- âœ… **æ§åˆ¶å°è¾“å‡º**ï¼š`[10-30 17:29:00] [I] æ¶ˆæ¯å†…å®¹`
- âœ… **æ–‡ä»¶ä¿å­˜**ï¼š`[10-30 17:29:00] [äº‘ç›˜æœåŠ¡] æ¶ˆæ¯å†…å®¹`
- âœ… ç§»é™¤äº†å¹´ä»½å’Œæ¯«ç§’ï¼Œä½¿æ—¥å¿—æ›´ç®€æ´
- âœ… ç§»é™¤äº† emoji è¡¨æƒ…ï¼Œé¿å…ç¼–ç é—®é¢˜
- âœ… ä¿ç•™äº†ä¸­æ–‡å­—ç¬¦ï¼Œç¡®ä¿ä¿¡æ¯å®Œæ•´

### 2. **æ—¥å¿—æ–‡ä»¶ç®¡ç†**
- ğŸ“ **è‡ªåŠ¨è½®è½¬**ï¼šå•ä¸ªæ–‡ä»¶è¶…è¿‡ 10MB è‡ªåŠ¨åˆ›å»ºæ–°æ–‡ä»¶
- ğŸ—‘ï¸ **è‡ªåŠ¨æ¸…ç†**ï¼šåªä¿ç•™æœ€æ–° 7 ä¸ªæ—¥å¿—æ–‡ä»¶
- ğŸ“… **æŒ‰æ—¥æœŸå‘½å**ï¼š`app_log_20251030.txt`
- ğŸ’¾ **æŒä¹…åŒ–å­˜å‚¨**ï¼šä¿å­˜åœ¨ `Documents/logs/` ç›®å½•

### 3. **æ—¥å¿—æŸ¥çœ‹å™¨** ğŸ”

#### è®¿é—®æ–¹å¼
```
è®¾ç½® â†’ é«˜çº§è®¾ç½® â†’ æ—¥å¿—æŸ¥çœ‹å™¨
```

#### åŠŸèƒ½åˆ—è¡¨
- âœ… **å®æ—¶æœç´¢**ï¼šæ”¯æŒå…³é”®è¯æœç´¢
- âœ… **åˆ†ç±»è¿‡æ»¤**ï¼šæŒ‰æ—¥å¿—ç±»åˆ«ç­›é€‰
- âœ… **ç»Ÿè®¡ä¿¡æ¯**ï¼šæŸ¥çœ‹å„ç±»æ—¥å¿—æ•°é‡
- âœ… **å¤åˆ¶åŠŸèƒ½**ï¼šå•æ¡/æ‰¹é‡å¤åˆ¶
- âœ… **å¯¼å‡ºåˆ†äº«**ï¼šå¯¼å‡ºå¹¶åˆ†äº«æ—¥å¿—æ–‡ä»¶
- âœ… **æ¸…ç©ºæ—¥å¿—**ï¼šä¸€é”®æ¸…ç©ºæ‰€æœ‰æ—¥å¿—

## ğŸš€ ä½¿ç”¨ç¤ºä¾‹

### 1. è®°å½•æ—¥å¿—

```dart
import 'package:flutter_ui_template/core/logging/log_manager.dart';

final logManager = LogManager();

// æ™®é€šä¿¡æ¯
logManager.info('ç”¨æˆ·ç™»å½•æˆåŠŸ');

// äº‘ç›˜æ“ä½œ
logManager.cloudDrive(
  'æ–‡ä»¶ä¸Šä¼ æˆåŠŸ',
  data: {
    'fileName': 'test.jpg',
    'size': 1024,
  },
);

// ç½‘ç»œè¯·æ±‚
logManager.network(
  'APIè¯·æ±‚æˆåŠŸ',
  data: {
    'url': 'https://api.example.com',
    'method': 'GET',
  },
);

// é”™è¯¯æ—¥å¿—
logManager.error(
  'æ–‡ä»¶ä¸‹è½½å¤±è´¥',
  exception: e,
  stackTrace: stack,
);
```

### 2. æŸ¥çœ‹æ—¥å¿—

```dart
// è·å–æ‰€æœ‰æ—¥å¿—
final logs = await logManager.getAllLogs();

// æŒ‰ç±»åˆ«è·å–
final cloudLogs = await logManager.getLogsByCategory(
  LogCategory.cloudDrive,
);

// è·å–ç»Ÿè®¡ä¿¡æ¯
final stats = await logManager.getLogStatistics();
```

### 3. å¯¼å‡ºæ—¥å¿—

```dart
// å¯¼å‡ºåˆ°æ–‡ä»¶
final filePath = await logManager.exportLogs();
if (filePath != null) {
  // åˆ†äº«æ–‡ä»¶
  await Share.shareXFiles([XFile(filePath)]);
}
```

## ğŸ“‚ æ–‡ä»¶ç»“æ„

```
lib/core/logging/
â”œâ”€â”€ log_manager.dart              # æ—¥å¿—ç®¡ç†å™¨ï¼ˆä¸»å…¥å£ï¼‰
â”œâ”€â”€ log_file_manager.dart         # æ–‡ä»¶ç®¡ç†ï¼ˆè½®è½¬ã€æ¸…ç†ï¼‰
â”œâ”€â”€ custom_log_printer.dart       # è‡ªå®šä¹‰æ—¥å¿—æ‰“å°å™¨
â”œâ”€â”€ log_category.dart             # æ—¥å¿—åˆ†ç±»å®šä¹‰
â”œâ”€â”€ log_config.dart               # æ—¥å¿—é…ç½®
â””â”€â”€ log_formatter.dart            # æ—¥å¿—æ ¼å¼åŒ–

lib/tool/log_viewer/
â””â”€â”€ pages/
    â””â”€â”€ log_viewer_page.dart      # æ—¥å¿—æŸ¥çœ‹å™¨ç•Œé¢
```

## ğŸ¨ æ—¥å¿—åˆ†ç±»

| åˆ†ç±» | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|-----|------|---------|
| ğŸ› Debug | è°ƒè¯•ä¿¡æ¯ | å¼€å‘è°ƒè¯• |
| ğŸ’¡ Info | ä¸€èˆ¬ä¿¡æ¯ | æ­£å¸¸æ“ä½œ |
| âš ï¸ Warning | è­¦å‘Š | æ½œåœ¨é—®é¢˜ |
| âŒ Error | é”™è¯¯ | å¼‚å¸¸æƒ…å†µ |
| ğŸŒ Network | ç½‘ç»œè¯·æ±‚ | APIè°ƒç”¨ |
| ğŸ“ FileOperation | æ–‡ä»¶æ“ä½œ | æ–‡ä»¶è¯»å†™ |
| ğŸ‘¤ UserAction | ç”¨æˆ·è¡Œä¸º | ç”¨æˆ·äº¤äº’ |
| â˜ï¸ CloudDrive | äº‘ç›˜æœåŠ¡ | äº‘ç›˜æ“ä½œ |
| âš¡ Performance | æ€§èƒ½ | æ€§èƒ½ç›‘æ§ |

## ğŸ“Š æ—¥å¿—æ ¼å¼ç¤ºä¾‹

### ä¼˜åŒ–å‰
```
flutter: â”‚ #0   LogManager._log (package:coco_cloud_drive/core/logging/log_manager.dart:236:19)
flutter: â”‚ #1   LogManager.cloudDrive (package:coco_cloud_drive/core/logging/log_manager.dart:178:5)
flutter: â”œâ”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„
flutter: â”‚ 17:08:36.824 (+0:00:58.639693)
flutter: â”œâ”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„â”„
flutter: â”‚ ğŸ’¡ [äº‘ç›˜æœåŠ¡] ğŸ“Š è´¦å·è¯¦æƒ…: CloudDriveAccountDetails{id: åšäº‹æœæ–­çš„çŒ«å¤´é¹°, name: åšäº‹æœæ–­çš„çŒ«å¤´é¹°, isValid: true}
```

### ä¼˜åŒ–å
```
[10-30 17:29:00] [I] [äº‘ç›˜æœåŠ¡] è´¦å·è¯¦æƒ…: CloudDriveAccountDetails{id: åšäº‹æœæ–­çš„çŒ«å¤´é¹°, name: åšäº‹æœæ–­çš„çŒ«å¤´é¹°, isValid: true}
```

## ğŸ”§ é…ç½®è¯´æ˜

### æ—¥å¿—æ–‡ä»¶é…ç½®
```dart
// lib/core/logging/log_file_manager.dart

/// æœ€å¤§æ—¥å¿—æ–‡ä»¶å¤§å°ï¼ˆ10MBï¼‰
static const int maxFileSize = 10 * 1024 * 1024;

/// ä¿ç•™çš„æ—¥å¿—æ–‡ä»¶æ•°é‡
static const int maxLogFiles = 7;
```

### æ—¥å¿—çº§åˆ«é…ç½®
```dart
// lib/core/logging/log_config.dart

// å¯ä»¥é…ç½®æ˜¯å¦å¯ç”¨æ§åˆ¶å°æ—¥å¿—
final isConsoleLoggingEnabled = true;

// å¯ä»¥é…ç½®æ˜¯å¦å¯ç”¨æ–‡ä»¶æ—¥å¿—
final isFileLoggingEnabled = true;
```

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. åˆç†ä½¿ç”¨æ—¥å¿—çº§åˆ«
```dart
// âœ… å¥½çš„åšæ³•
logManager.debug('æ­£åœ¨å¤„ç†æ•°æ®...');  // å¼€å‘æ—¶ä½¿ç”¨
logManager.info('æ–‡ä»¶ä¸Šä¼ æˆåŠŸ');      // æ­£å¸¸æ“ä½œ
logManager.warning('ç£ç›˜ç©ºé—´ä¸è¶³');   // è­¦å‘Š
logManager.error('ç½‘ç»œè¯·æ±‚å¤±è´¥', exception: e);  // é”™è¯¯

// âŒ é¿å…çš„åšæ³•
logManager.error('ç”¨æˆ·ç‚¹å‡»æŒ‰é’®');  // ä¸åº”è¯¥ç”¨ error
logManager.debug('ç³»ç»Ÿå´©æºƒ');      // åº”è¯¥ç”¨ error
```

### 2. æ·»åŠ ä¸Šä¸‹æ–‡ä¿¡æ¯
```dart
// âœ… å¥½çš„åšæ³•
logManager.cloudDrive(
  'æ–‡ä»¶ä¸‹è½½å¤±è´¥',
  data: {
    'fileName': 'test.jpg',
    'fileId': 'abc123',
    'accountId': '12345',
    'errorCode': 404,
  },
);

// âŒ é¿å…çš„åšæ³•
logManager.cloudDrive('ä¸‹è½½å¤±è´¥');  // ç¼ºå°‘ä¸Šä¸‹æ–‡
```

### 3. å®šæœŸæ¸…ç†æ—¥å¿—
```dart
// åœ¨é€‚å½“çš„æ—¶æœºæ¸…ç†æ—¥å¿—
await logManager.clearLogs();
```

## ğŸ› é—®é¢˜æ’æŸ¥

### é—®é¢˜1ï¼šæ—¥å¿—æ–‡ä»¶ç¼–ç é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**ï¼šå·²å®ç°è‡ªåŠ¨ç¼–ç æ¸…ç†ï¼Œå¦‚é‡åˆ°é—®é¢˜ï¼š
1. è¿›å…¥æ—¥å¿—æŸ¥çœ‹å™¨
2. ç‚¹å‡»"æ¸…ç©ºæ—¥å¿—"
3. é‡æ–°ç”Ÿæˆæ—¥å¿—

### é—®é¢˜2ï¼šæ—¥å¿—æ–‡ä»¶è¿‡å¤§
**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç³»ç»Ÿä¼šè‡ªåŠ¨è½®è½¬ï¼Œè¶…è¿‡10MBè‡ªåŠ¨åˆ›å»ºæ–°æ–‡ä»¶
- åªä¿ç•™æœ€æ–°7ä¸ªæ–‡ä»¶
- å¯æ‰‹åŠ¨æ¸…ç©ºæ—¥å¿—

### é—®é¢˜3ï¼šæ— æ³•å¯¼å‡ºæ—¥å¿—
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥å­˜å‚¨æƒé™
2. ç¡®ä¿æœ‰è¶³å¤Ÿçš„å­˜å‚¨ç©ºé—´
3. ä½¿ç”¨æ—¥å¿—æŸ¥çœ‹å™¨çš„"åˆ†äº«"åŠŸèƒ½

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-10-30)
- âœ… ä¼˜åŒ–æ—¥å¿—æ ¼å¼ï¼ˆç§»é™¤å¹´ä»½å’Œæ¯«ç§’ï¼‰
- âœ… ç§»é™¤ emoji è¡¨æƒ…ï¼Œè§£å†³ç¼–ç é—®é¢˜
- âœ… å®ç°æ—¥å¿—æ–‡ä»¶è‡ªåŠ¨è½®è½¬
- âœ… æ·»åŠ æ—¥å¿—æŸ¥çœ‹å™¨ç•Œé¢
- âœ… æ”¯æŒæ—¥å¿—æœç´¢å’Œè¿‡æ»¤
- âœ… æ”¯æŒæ—¥å¿—å¯¼å‡ºå’Œåˆ†äº«
- âœ… è‡ªåŠ¨æ¸…ç†æ—§æ—¥å¿—æ–‡ä»¶

## ğŸ”— ç›¸å…³é“¾æ¥

- [Logger æ–‡æ¡£](https://pub.dev/packages/logger)
- [é¡¹ç›®ç»“æ„è¯´æ˜](PROJECT_STRUCTURE.md)

---

**æç¤º**ï¼šå¦‚éœ€ä¿®æ”¹æ—¥å¿—æ ¼å¼ï¼Œè¯·ç¼–è¾‘ `lib/core/logging/custom_log_printer.dart` æ–‡ä»¶ã€‚

